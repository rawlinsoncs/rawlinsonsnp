# Rawlinson SNP — Documentation Site

A Hugo + Docsy site for project documentation. This README covers local development, required tooling, Docsy customization tips, and common Hugo commands.

## Quick Start (Local Dev)

- Install prerequisites (see Tech Stack below).
- Clone the repo, then run the dev server:
  - `hugo server -D`
- Open the local URL from the terminal (usually `http://localhost:1313/`).
- Edit files under `content/`, `layouts/`, or `assets/`; the server live‑reloads.

## Tech Stack Overview

- Hugo Extended — v0.153.2 (CI)
  - Required for SCSS/SASS pipeline and some Docsy features.
  - Verify with `hugo version` → look for “extended”.
- Dart Sass — v1.97.1 (CI)
  - Used when customizing SCSS; ensure local version parity for consistent CSS.
- Go — v1.25.5 (CI)
  - Needed for Hugo modules (Docsy). Minimal local usage unless updating modules.
- Node.js — v24.12.0 (CI)
  - Used for optional tooling or npm scripts if present.
- Docsy theme (Go module)
  - Imported via `go.mod` and referenced from `hugo.toml`.
  - Customizations live in `layouts/` and `assets/`.
- GitHub Pages (CI)
  - Build and deploy with `hugo --gc --minify` in CI.

## Project Structure

- `content/` — Markdown pages and section indexes (e.g., `_index.md`).
- `layouts/` — Template overrides and shortcodes (`layouts/shortcodes/`).
- `static/` — Static assets served as-is (images, files).
- `assets/` — Pipeline-managed assets (SCSS/JS) with Hugo Extended.
- `data/`, `i18n/` — Site data files and translations.
- `public/` — Build output (generated by `hugo`; do not commit locally).
- `.github/workflows/` — CI for GitHub Pages; mirrors local build flags.
- `hugo.toml`, `go.mod` — Site config and Docsy module import.

## Development Guide

- Install Hugo Extended and Dart Sass.
- Start the live-reload server including drafts:
  - `hugo server -D`
- Keep content in Markdown with front matter; prefer sentence-case titles and helpful summaries.
- Filenames: lowercase and hyphenated (e.g., `student-nutrition/index.md`).
- Validate locally before opening a PR (see Commands).

## Overriding Docsy Styles & Elements

Docsy is flexible: you can override styles and templates without forking the theme.

- Styles (SCSS)
  - Create or edit SCSS in `assets/`.
  - Common approaches:
    - Variables: define custom variables or override Docsy’s in your SCSS entry (e.g., `assets/scss/_variables_project.scss`).
    - Overrides: add a project stylesheet (e.g., `assets/scss/_overrides.scss`) and import it from your main entry point.
  - Hugo Extended will compile SCSS during build. Ensure local Dart Sass version matches CI for parity.
- Templates & Partials
  - Place overrides under `layouts/` using the same path as the theme template you want to replace (Hugo picks project files over theme files).
  - Add or customize partials in `layouts/partials/` and reference them from your templates.
- Shortcodes
  - Add custom shortcodes under `layouts/shortcodes/` (e.g., `layouts/shortcodes/hp5.html`).
  - Use in Markdown like `{{< hp5 param="value" >}}`.
- Static Assets
  - Put unprocessed assets in `static/` to serve them at the site root (e.g., `/images/...`).

Tip: When debugging layouts, run with `--printI18nWarnings --printUnusedTemplates` to catch missing translations and unused overrides.

## Common Hugo Commands

- Dev server with drafts:
  - `hugo server -D`
- Production build (outputs to `public/`):
  - `hugo --gc --minify`
- CI-parity build (useful for local checks):
  - `hugo --gc --minify --baseURL "http://localhost/"`
- Extra diagnostics while tweaking layouts/i18n:
  - `hugo --printI18nWarnings --printUnusedTemplates`

## Configuration Notes

- Base URL
  - For non–GitHub Pages hosting, update `baseURL` in `hugo.toml`.
- Dependencies
  - Ensure `go.mod` includes Docsy; run `hugo mod get -u` if updating.
- CI
  - GitHub Pages workflow uses pinned versions; align local Hugo Extended and Dart Sass for consistent builds.

### Version Parity with CI (exact versions)

- Hugo Extended 0.153.2
  - macOS (Homebrew): `brew install hugo` (ensures extended); check version with `hugo version`.
  - Any OS (manual): download release `hugo_extended_0.153.2_*.tar.gz` from GitHub and add to `PATH`.
- Dart Sass 1.97.1
  - Easiest cross‑platform: `npm i -g sass@1.97.1` then `sass --version`.
  - Linux (binary, like CI): download `dart-sass-1.97.1-<os>-<arch>.tar.gz` from GitHub and add to `PATH`.
- Go 1.25.5
  - macOS: `brew install go@1.25` and `brew link --force go@1.25` (or use `asdf`/`gvm`).
  - Check with `go version`.
- Node.js 24.12.0
  - With nvm: `nvm install 24.12.0 && nvm use 24.12.0`.
  - Check with `node --version`.

Verify parity:

```
sass --version    # 1.97.1
hugo version      # Hugo 0.153.2+extended
go version        # go1.25.5
node --version    # v24.12.0
```

### Version Files for Local Tooling

- `.nvmrc` → Node.js version for nvm: `nvm use` picks up `24.12.0`.
- `.tool-versions` (asdf) → pins: `golang 1.25.5`, `nodejs 24.12.0`, `hugo 0.153.2`, `dart-sass 1.97.1`.
  - Use `asdf install` to install all pinned tools, then `asdf shell`/`asdf local` as desired.

## Contributing

- Keep PRs focused and incremental.
- Use concise, imperative commit messages (e.g., "Add snack reporting form").
- Include before/after screenshots for UI or content changes when relevant.

## License

- This site likely contains organization-specific content. Unless otherwise noted, treat as private/internal. Do not commit secrets.
